#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
经典命理分析常量定义 - 基于《子平真诠》《滴天髓》等经典著作
"""

# ══════════════════════════════════════════════════════════════════
# 五行属性映射
# ══════════════════════════════════════════════════════════════════

WUXING_MAP = {
    # 天干五行
    '甲': '木', '乙': '木',
    '丙': '火', '丁': '火',
    '戊': '土', '己': '土',
    '庚': '金', '辛': '金',
    '壬': '水', '癸': '水',
    
    # 地支五行
    '寅': '木', '卯': '木',
    '巳': '火', '午': '火',
    '辰': '土', '戌': '土', '丑': '土', '未': '土',
    '申': '金', '酉': '金',
    '亥': '水', '子': '水'
}

# ══════════════════════════════════════════════════════════════════
# 五行生克关系
# ══════════════════════════════════════════════════════════════════

# 克制关系：我克者为财，克我者为官杀
KE_MAP = {
    '木': '土',
    '土': '水',
    '水': '火',
    '火': '金',
    '金': '木'
}

# 生助关系：我生者为食伤，生我者为印
SHENG_MAP = {
    '木': '火',
    '火': '土',
    '土': '金',
    '金': '水',
    '水': '木'
}

# ══════════════════════════════════════════════════════════════════
# 地支藏干表（带权重）
# 根据《子平真诠》和《滴天髓》理论，采用本气/中气/余气权重比例
# ══════════════════════════════════════════════════════════════════

# ✅ 已统一：使用与 chinese_metaphysics_library/core/constants.py 相同的定义
# 权重说明：本气0.6-0.7，中气0.2-0.3，余气0.1，总和为1.0
CANG_GAN_MAP = {
    '子': [('癸', 1.0)],                          # 子水：纯癸水
    '丑': [('己', 0.6), ('癸', 0.3), ('辛', 0.1)],  # 丑土：己土本气，癸水中气，辛金余气
    '寅': [('甲', 0.7), ('丙', 0.2), ('戊', 0.1)],  # 寅木：甲木本气，丙火中气，戊土余气
    '卯': [('乙', 1.0)],                          # 卯木：纯乙木
    '辰': [('戊', 0.6), ('乙', 0.3), ('癸', 0.1)],  # 辰土：戊土本气，乙木中气，癸水余气
    '巳': [('丙', 0.7), ('戊', 0.2), ('庚', 0.1)],  # 巳火：丙火本气，戊土中气，庚金余气
    '午': [('丁', 0.7), ('己', 0.3)],              # 午火：丁火本气，己土中气
    '未': [('己', 0.6), ('丁', 0.3), ('乙', 0.1)],  # 未土：己土本气，丁火中气，乙木余气
    '申': [('庚', 0.7), ('壬', 0.2), ('戊', 0.1)],  # 申金：庚金本气，壬水中气，戊土余气
    '酉': [('辛', 1.0)],                          # 酉金：纯辛金
    '戌': [('戊', 0.6), ('辛', 0.3), ('丁', 0.1)],  # 戌土：戊土本气，辛金中气，丁火余气
    '亥': [('壬', 0.7), ('甲', 0.3)]               # 亥水：壬水本气，甲木中气
}

# ══════════════════════════════════════════════════════════════════
# 天干合化表
# ══════════════════════════════════════════════════════════════════

HE_MAP = {
    '甲': '己', '己': '甲',
    '乙': '庚', '庚': '乙',
    '丙': '辛', '辛': '丙',
    '丁': '壬', '壬': '丁',
    '戊': '癸', '癸': '戊'
}

# ══════════════════════════════════════════════════════════════════
# 地支刑冲关系
# ══════════════════════════════════════════════════════════════════

# 刑：子刑卯、卯刑子；寅刑巳、巳刑申、申刑寅；丑刑戌、戌刑未、未刑丑
XING_PAIRS = [
    ['子', '卯'], ['寅', '巳'], ['巳', '申'], ['申', '寅'],
    ['丑', '戌'], ['戌', '未'], ['未', '丑']
]

# 冲：子午冲、丑未冲、寅申冲、卯酉冲、辰戌冲、巳亥冲
CHONG_PAIRS = [
    ['子', '午'], ['丑', '未'], ['寅', '申'], 
    ['卯', '酉'], ['辰', '戌'], ['巳', '亥']
]

# ══════════════════════════════════════════════════════════════════
# 三合局
# ══════════════════════════════════════════════════════════════════

# 三合局：寅午戌（火局）、亥卯未（木局）、申子辰（水局）、巳酉丑（金局）
SAN_HE_GROUPS = [
    ['寅', '午', '戌'],
    ['亥', '卯', '未'],
    ['申', '子', '辰'],
    ['巳', '酉', '丑']
]

# ══════════════════════════════════════════════════════════════════
# 六合
# ══════════════════════════════════════════════════════════════════

# 六合：子丑、寅亥、卯戌、辰酉、巳申、午未
LIU_HE_PAIRS = [
    ['子', '丑'],
    ['寅', '亥'],
    ['卯', '戌'],
    ['辰', '酉'],
    ['巳', '申'],
    ['午', '未']
]