# 八卦时钟 V2.0.0 - 传统版

## 🌟 项目简介

**八卦时钟传统版**是一个完全本地化的命理分析系统，基于传统命理学理论，采用纯本地算法实现，不依赖任何外部API。

### ✨ 核心特点

- ✅ **完全本地化** - 不依赖任何外部API
- ✅ **精确计算** - 使用sxtwl库进行真太阳时修正
- ✅ **传统理论** - 基于《渊海子平》《三命通会》等经典
- ✅ **离线可用** - 零网络依赖
- ✅ **零成本** - 无API调用费用
- ✅ **快速响应** - 本地计算，毫秒级响应
- ✅ **隐私保护** - 数据不上传云端

## 📦 系统组成

### 核心模块

1. **bagua_clock.py** - 主程序
   - PyQt5图形界面
   - 八卦时钟显示
   - 功能集成调度

2. **local_mingli_analyzer.py** - 本地命理分析引擎 ⭐
   - 五行分析
   - 十神分析
   - 格局判断
   - 用神分析
   - 事业财运
   - 婚姻健康
   - 大运流年

3. **sxtwl_adapter.py** - 八字计算模块
   - 真太阳时修正
   - 节气精确定年月
   - 地理位置校正

## 🚀 快速开始

### 环境要求

- Python 3.7+
- Windows / macOS / Linux

### 安装依赖

```bash
pip install -r requirements_recovered.txt
```

或手动安装：

```bash
pip install PyQt5>=5.15.0
pip install requests>=2.25.0
pip install pygame>=2.0.0
pip install lunar-python>=1.4.0
pip install sxtwl>=1.0.0
```

### 运行程序

```bash
python bagua_clock.py
```

### 测试系统

```bash
# 快速测试
python test_traditional_version.py

# 测试本地分析器
python local_mingli_analyzer.py

# 测试八字计算
python sxtwl_adapter.py 1990 1 1 12
```

## 📖 功能说明

### 1. 八字算命

**输入信息：**
- 农历出生日期（年/月/日）
- 出生时辰（12时辰）
- 性别
- 姓名（可选）
- 出生地（可选，用于真太阳时修正）

**输出分析：**
- 四柱信息（年/月/日/时柱）
- 五行分析（强弱分布）
- 十神分析（十神配置）
- 格局判断（格局类型）
- 旺衰分析（日主强弱）
- 用神分析（喜忌神）
- 性格特点
- 事业财运
- 婚姻感情
- 健康提示
- 大运流年

### 2. 时钟功能

- 实时显示当前时间
- 八卦方位显示
- 时辰对应显示
- 缩放功能（Ctrl++ / Ctrl+-）
- 全屏模式（F11）

### 3. 辅助功能

- 记事本
- 闹钟提醒
- 系统设置
- 系统托盘

## 🔬 技术架构

### 分析流程

```
用户输入
  ↓
农历→公历转换 (lunar-python)
  ↓
精确四柱计算 (sxtwl)
  ├─ 真太阳时修正
  ├─ 节气定年月
  └─ 地理位置校正
  ↓
本地命理分析 (LocalMingliAnalyzer)
  ├─ 五行分析
  ├─ 十神分析
  ├─ 格局判断
  ├─ 用神分析
  └─ 综合分析
  ↓
生成分析报告
```

### 数据流

```
输入数据 → sxtwl计算 → 四柱数据 → 本地分析器 → 分析报告
   ↓                                            ↓
保存记录                                     显示输出
```

## 📊 分析示例

```
╔══════════════════════════════════════════════════════════╗
║                 传统八字命理分析报告                      ║
║               （本地算法 - 纯传统命理学）                  ║
╚══════════════════════════════════════════════════════════╝

【一、四柱信息】
年柱：庚午    月柱：戊寅    日柱：丙午    时柱：癸巳
日主：丙（火）    性别：男

【二、五行分析】
五行分布：木1个 火3个 土2个 金1个 水1个
五行详情：木1 火3 土2 金1 水1

【三、十神分析】
十神：偏财1个、食神1个、正官1个
年干：偏财
月干：食神
时干：正官

【四、格局判断】
格局类型：食伤格
格局说明：月令透食伤，以食伤为用，宜技艺创作

【五、旺衰分析】
日主丙(火)在寅月得生，身偏旺
旺衰等级：偏旺（强度：70）

【六、用神分析】
用神宜土,金，宜克泄耗，忌生扶助
喜用建议：宜克泄耗，忌生扶助

【七、性格特点】
热情开朗，积极乐观，有领导才能，但有时急躁冲动；
思维活跃，富有创造力，表达能力强

【八、事业财运】
财运等级：较好
事业建议：
适合技术、艺术、创作类工作
富有创造力，适合自由职业
财星多现，财运较佳，善于积累

【九、婚姻感情】
婚姻质量：良好
感情分析：财星专一，婚姻美满

【十、健康提示】
五行平衡，体质较好

【十一、大运概况】
当前行第4步大运（30~40岁）
运势建议：具体大运吉凶需结合实际运势分析

════════════════════════════════════════════════════════════
注：本报告基于传统命理学理论，采用纯本地算法生成，仅供参考。
命运掌握在自己手中，后天努力同样重要。
════════════════════════════════════════════════════════════
```

## ⚙️ 配置说明

### 系统设置

在主界面点击"设置"按钮可以配置：

1. **显示设置**
   - 时钟缩放比例
   - 窗口位置
   - 透明度

2. **功能设置**
   - 时辰提醒
   - 健康提醒
   - 音效开关

3. **其他设置**
   - 开机自启
   - 托盘模式

### 快捷键

- `Ctrl + +` : 放大时钟
- `Ctrl + -` : 缩小时钟
- `Ctrl + 0` : 重置大小
- `F11` : 全屏模式
- `ESC` : 退出全屏

## 🔧 开发说明

### 项目结构

```
py_suanming传统版/
├── bagua_clock.py              # 主程序
├── local_mingli_analyzer.py    # 本地命理分析引擎 ⭐
├── sxtwl_adapter.py            # 八字计算模块
├── test_traditional_version.py # 测试脚本
├── requirements_recovered.txt  # 依赖配置
├── README_传统版.md            # 本文档
├── 传统版恢复说明.md           # 恢复说明
└── alarms.json                 # 闹钟配置
```

### 扩展开发

#### 添加新的分析功能

在 `local_mingli_analyzer.py` 的 `LocalMingliAnalyzer` 类中添加新方法：

```python
def analyze_new_feature(self, pillars, ...):
    """新功能分析"""
    # 实现分析逻辑
    return analysis_result
```

#### 修改分析规则

修改 `LocalMingliAnalyzer` 类中的规则字典：

```python
self.custom_rules = {
    # 添加自定义规则
}
```

## 🐛 故障排除

### 问题1：sxtwl模块导入失败

**解决方案：**
```bash
pip install sxtwl --upgrade
```

### 问题2：lunar-python计算错误

**解决方案：**
```bash
pip install lunar-python --upgrade
```

### 问题3：界面显示异常

**解决方案：**
```bash
pip install PyQt5 --upgrade
```

### 问题4：测试失败

**解决方案：**
1. 检查Python版本（需要3.7+）
2. 重新安装所有依赖
3. 查看错误堆栈信息

## 📝 更新日志

### V2.0.0 - 传统版 (2025-10-23)

#### 新增功能
- ✨ 完整的本地命理分析引擎
- ✨ 基于传统命理学规则的分析系统
- ✨ 五行、十神、格局完整分析
- ✨ 用神喜忌自动判断
- ✨ 事业、财运、婚姻、健康分析
- ✨ 大运流年简化分析

#### 技术改进
- 🔧 移除所有API依赖
- 🔧 优化分析算法
- 🔧 提升响应速度
- 🔧 增强隐私保护

#### 移除功能
- ❌ 移除DeepSeek API调用
- ❌ 移除OpenAI依赖
- ❌ 移除网络分析功能

## 🤝 贡献

欢迎贡献代码、报告问题、提出建议！

## 📄 许可证

版权所有 © 2025 湖南全航信息通信有限公司

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 项目地址：本地项目
- 技术支持：湖南全航信息通信有限公司

---

**声明：** 本软件仅供参考娱乐，命运掌握在自己手中，后天努力同样重要！
