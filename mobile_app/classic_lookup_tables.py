#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
经典命理学对照表数据库
严格基于《渊海子平》《三命通会》《子平真诠》《滴天髓》《穷通宝鉴》等经典著作
所有查法都是查表，不做推算
"""

# ════════════════════════════════════════════════════════════════════
# 一、神煞对照表（基于《渊海子平》《三命通会》）
# ════════════════════════════════════════════════════════════════════

class ClassicLookupTables:
    """经典对照表类"""
    
    def __init__(self):
        self.init_shensha_tables()
        self.init_qiongtong_tables()
        self.init_geju_tables()
    
    # ════════ 1. 天乙贵人对照表 ════════
    # 出处：《渊海子平》
    # 口诀：甲戊见牛羊，乙己鼠猴乡，丙丁猪鸡位，壬癸兔蛇藏，庚辛逢虎马
    def init_shensha_tables(self):
        """初始化神煞对照表"""
        
        self.TIANYI_GUIREN = {
            '甲': ['丑', '未'],  # 牛羊
            '戊': ['丑', '未'],  # 牛羊
            '乙': ['子', '申'],  # 鼠猴
            '己': ['子', '申'],  # 鼠猴
            '丙': ['亥', '酉'],  # 猪鸡
            '丁': ['亥', '酉'],  # 猪鸡
            '壬': ['卯', '巳'],  # 兔蛇
            '癸': ['卯', '巳'],  # 兔蛇
            '庚': ['丑', '午'],  # 注：庚有两种说法，这里采用常见版本
            '辛': ['寅', '午'],  # 虎马
        }
        
        # ════════ 2. 文昌贵人对照表 ════════
        # 出处：《渊海子平》
        # 口诀：甲乙巳午报君知，丙戊申宫丁己鸡，庚猪辛鼠壬逢虎，癸人见卯入云梯
        self.WENCHANG_GUIREN = {
            '甲': '巳',
            '乙': '午',
            '丙': '申',
            '丁': '酉',  # 鸡
            '戊': '申',
            '己': '酉',  # 鸡
            '庚': '亥',  # 猪
            '辛': '子',  # 鼠
            '壬': '寅',  # 虎
            '癸': '卯',
        }
        
        # ════════ 3. 禄神对照表 ════════
        # 出处：《渊海子平》
        # 口诀：甲禄在寅，乙禄在卯，丙戊禄在巳...
        self.LUSHEN = {
            '甲': '寅',
            '乙': '卯',
            '丙': '巳',
            '丁': '午',
            '戊': '巳',
            '己': '午',
            '庚': '申',
            '辛': '酉',
            '壬': '亥',
            '癸': '子',
        }
        
        # ════════ 4. 羊刃对照表 ════════
        # 出处：《渊海子平》
        # 说明：阳干有羊刃，阴干无羊刃
        self.YANGREN = {
            '甲': '卯',  # 阳木羊刃在卯
            '丙': '午',  # 阳火羊刃在午
            '戊': '午',  # 阳土羊刃在午
            '庚': '酉',  # 阳金羊刃在酉
            '壬': '子',  # 阳水羊刃在子
            # 乙丁己辛癸（阴干）无羊刃
        }
        
        # ════════ 5. 桃花（咸池）对照表 ════════
        # 出处：《渊海子平》
        # 查法：三合法，以年支或日支为主
        # 寅午戌见卯，巳酉丑见午，申子辰见酉，亥卯未见子
        self.TAOHUA = {
            '寅': '卯',  # 寅午戌三合火局，桃花在卯
            '午': '卯',
            '戌': '卯',
            '巳': '午',  # 巳酉丑三合金局，桃花在午
            '酉': '午',
            '丑': '午',
            '申': '酉',  # 申子辰三合水局，桃花在酉
            '子': '酉',
            '辰': '酉',
            '亥': '子',  # 亥卯未三合木局，桃花在子
            '卯': '子',
            '未': '子',
        }
        
        # ════════ 6. 空亡（旬空）对照表 ════════
        # 出处：《渊海子平》
        # 查法：以日柱查所属的旬，然后检查日支和时支是否空亡
        self.KONGWANG_TABLE = {
            # 十天干配十二地支，剩余的两个地支即为空亡
            '甲子': ['戌', '亥'],  # 甲子旬：甲子、乙丑、丙寅...癸酉（10对），缺戌亥
            '甲戌': ['申', '酉'],  # 甲戌旬：甲戌、乙亥、丙子...癸未，缺申酉
            '甲申': ['午', '未'],  # 甲申旬：甲申、乙酉、丙戌...癸巳，缺午未
            '甲午': ['辰', '巳'],  # 甲午旬：甲午、乙未、丙申...癸卯，缺辰巳
            '甲辰': ['寅', '卯'],  # 甲辰旬：甲辰、乙巳、丙午...癸丑，缺寅卯
            '甲寅': ['子', '丑'],  # 甲寅旬：甲寅、乙卯、丙辰...癸亥，缺子丑
        }
        
        # 六十甲子完整列表
        self.LIUSHI_JIAZI = [
            '甲子', '乙丑', '丙寅', '丁卯', '戊辰', '己巳', '庚午', '辛未', '壬申', '癸酉',  # 甲子旬
            '甲戌', '乙亥', '丙子', '丁丑', '戊寅', '己卯', '庚辰', '辛巳', '壬午', '癸未',  # 甲戌旬
            '甲申', '乙酉', '丙戌', '丁亥', '戊子', '己丑', '庚寅', '辛卯', '壬辰', '癸巳',  # 甲申旬
            '甲午', '乙未', '丙申', '丁酉', '戊戌', '己亥', '庚子', '辛丑', '壬寅', '癸卯',  # 甲午旬
            '甲辰', '乙巳', '丙午', '丁未', '戊申', '己酉', '庚戌', '辛亥', '壬子', '癸丑',  # 甲辰旬
            '甲寅', '乙卯', '丙辰', '丁巳', '戊午', '己未', '庚申', '辛酉', '壬戌', '癸亥',  # 甲寅旬
        ]
        
        # ════════ 7. 华盖对照表 ════════
        # 出处：《渊海子平》
        # 查法：三合法，以年支或日支为主
        self.HUAGAI = {
            '寅': '戌',  # 寅午戌见戌
            '午': '戌',
            '戌': '戌',
            '申': '辰',  # 申子辰见辰
            '子': '辰',
            '辰': '辰',
            '巳': '丑',  # 巳酉丑见丑
            '酉': '丑',
            '丑': '丑',
            '亥': '未',  # 亥卯未见未
            '卯': '未',
            '未': '未',
        }
        
        # ════════ 8. 驿马对照表 ════════
        # 出处：《渊海子平》
        # 查法：以年支或日支为主
        self.YIMA = {
            '寅': '申',  # 寅午戌见申
            '午': '申',
            '戌': '申',
            '申': '寅',  # 申子辰见寅
            '子': '寅',
            '辰': '寅',
            '巳': '亥',  # 巳酉丑见亥
            '酉': '亥',
            '丑': '亥',
            '亥': '巳',  # 亥卯未见巳
            '卯': '巳',
            '未': '巳',
        }
        
        # ════════ 9. 红艳对照表 ════════
        # 出处：《兰台妙选》
        # 以日干或年干为主查地支
        self.HONGYAN = {
            '甲': '午',
            '乙': '申',
            '丙': '寅',
            '丁': '未',
            '戊': '辰',
            '己': '辰',
            '庚': '戌',
            '辛': '酉',
            '壬': '子',
            '癸': '申',
        }

        # ════════ 11. 天德 / 月德 ════════
        # 出处：《三命通会·论天月德》
        # 以年支（天德）与月支（月德）分四局查得
        self.TIANDE = {
            '寅': '丙', '午': '丙', '戌': '丙',
            '申': '壬', '子': '壬', '辰': '壬',
            '亥': '甲', '卯': '甲', '未': '甲',
            '巳': '庚', '酉': '庚', '丑': '庚',
        }
        self.YUEDE = {
            '寅': '丁', '午': '丁', '戌': '丁',
            '申': '癸', '子': '癸', '辰': '癸',
            '亥': '乙', '卯': '乙', '未': '乙',
            '巳': '辛', '酉': '辛', '丑': '辛',
        }
        
        # ════════ 10. 孤辰寡宿对照表 ════════
        # 出处：《三命通会》
        # 以年支为主查
        self.GUCHEN = {  # 孤辰（男命不利）
            '亥': '寅', '子': '寅', '丑': '寅',
            '寅': '巳', '卯': '巳', '辰': '巳',
            '巳': '申', '午': '申', '未': '申',
            '申': '亥', '酉': '亥', '戌': '亥',
        }
        
        self.GUASU = {  # 寡宿（女命不利）
            '亥': '戌', '子': '戌', '丑': '戌',
            '寅': '丑', '卯': '丑', '辰': '丑',
            '巳': '辰', '午': '辰', '未': '辰',
            '申': '未', '酉': '未', '戌': '未',
        }
    
    # ════════════════════════════════════════════════════════════════════
    # 二、《穷通宝鉴》调候用神对照表
    # ════════════════════════════════════════════════════════════════════
    
    def init_qiongtong_tables(self):
        """初始化《穷通宝鉴》调候用神表"""
        
        # 月令对应表（农历月份）
        self.MONTH_NAMES = {
            1: '正月', 2: '二月', 3: '三月', 4: '四月',
            5: '五月', 6: '六月', 7: '七月', 8: '八月',
            9: '九月', 10: '十月', 11: '十一月', 12: '十二月'
        }
        
        # 地支对应月份
        self.ZHI_TO_MONTH = {
            '寅': 1, '卯': 2, '辰': 3, '巳': 4,
            '午': 5, '未': 6, '申': 7, '酉': 8,
            '戌': 9, '亥': 10, '子': 11, '丑': 12
        }
        
        # 调候用神表（日干×月令）
        # 格式：{日干: {月支: {'主用神': [], '辅用神': [], '说明': ''}}}
        self.DIAOHOU_YONGSHEN = {
            '甲': {
                '寅': {'主': ['丙'], '辅': ['癸'], '说明': '调和气候为要，丙火为主，癸水为佐'},
                '卯': {'主': ['庚'], '辅': ['丙', '丁'], '说明': '阳刃驾杀，因材施用'},
                '辰': {'主': ['庚'], '辅': ['丁', '甲'], '说明': '以庚金为首'},
                '巳': {'主': ['癸'], '辅': ['庚', '丁'], '说明': '调候不可缺水'},
                '午': {'主': ['癸'], '辅': ['庚'], '说明': '木性虚焦，癸为第一'},
                '未': {'主': ['癸'], '辅': ['庚'], '说明': '同午月'},
                '申': {'主': ['庚'], '辅': ['丁', '壬'], '说明': '伐木宜庚，暖木宜丁'},
                '酉': {'主': ['庚'], '辅': ['丁'], '说明': '庚金坐禄，专用丁火制之'},
                '戌': {'主': ['庚'], '辅': ['甲', '丁'], '说明': '土旺宜疏'},
                '亥': {'主': ['庚'], '辅': ['丁', '丙'], '说明': '水冷木寒，丙火为尊'},
                '子': {'主': ['丁'], '辅': ['庚', '丙'], '说明': '木寒宜丁，甲强用庚'},
                '丑': {'主': ['丁'], '辅': ['庚', '丙'], '说明': '同子月'},
            },
            '乙': {
                '寅': {'主': ['丙'], '辅': [], '说明': '寒木向阳'},
                '卯': {'主': ['癸'], '辅': ['丙'], '说明': '旺木宜癸水滋润'},
                '辰': {'主': ['癸'], '辅': ['丙'], '说明': '湿土晦木，先用癸水'},
                '巳': {'主': ['癸'], '辅': [], '说明': '木性虚焦，专用癸水'},
                '午': {'主': ['癸'], '辅': ['丙'], '说明': '木枯宜癸'},
                '未': {'主': ['癸'], '辅': ['丙'], '说明': '同午月'},
                '申': {'主': ['丙'], '辅': ['癸'], '说明': '寒气渐生，丙火为先'},
                '酉': {'主': ['丙'], '辅': ['癸'], '说明': '同申月'},
                '戌': {'主': ['癸'], '辅': ['丙'], '说明': '土旺晦木，癸水为先'},
                '亥': {'主': ['丙'], '辅': [], '说明': '水旺木寒，专用丙火'},
                '子': {'主': ['丙'], '辅': [], '说明': '同亥月'},
                '丑': {'主': ['丙'], '辅': [], '说明': '同亥月'},
            },
            '丙': {
                '寅': {'主': ['壬'], '辅': ['庚'], '说明': '壬水为主，庚金发水源'},
                '卯': {'主': ['壬'], '辅': [], '说明': '专用壬水'},
                '辰': {'主': ['壬'], '辅': ['甲'], '说明': '土旺火晦，壬水为主'},
                '巳': {'主': ['壬'], '辅': [], '说明': '火旺宜壬'},
                '午': {'主': ['壬'], '辅': ['庚'], '说明': '专用壬水，庚金发源'},
                '未': {'主': ['壬'], '辅': ['庚'], '说明': '同午月'},
                '申': {'主': ['壬'], '辅': ['戊'], '说明': '壬水为用，戊土为佐'},
                '酉': {'主': ['壬'], '辅': [], '说明': '专用壬水'},
                '戌': {'主': ['壬'], '辅': ['甲'], '说明': '火土燥烈，壬甲为用'},
                '亥': {'主': ['戊'], '辅': ['甲'], '说明': '水旺宜戊土制之'},
                '子': {'主': ['戊'], '辅': ['壬'], '说明': '水旺用戊，寒用壬'},
                '丑': {'主': ['戊'], '辅': ['壬'], '说明': '同子月'},
            },
            '丁': {
                '寅': {'主': ['甲'], '辅': ['庚'], '说明': '甲木引丁，庚金劈甲'},
                '卯': {'主': ['甲'], '辅': ['庚'], '说明': '同寅月'},
                '辰': {'主': ['甲'], '辅': ['庚'], '说明': '土旺晦火，甲木为先'},
                '巳': {'主': ['甲'], '辅': ['庚'], '说明': '火旺用甲木化泄'},
                '午': {'主': ['壬'], '辅': ['庚'], '说明': '火炎宜壬水'},
                '未': {'主': ['壬'], '辅': ['甲'], '说明': '土旺晦火，壬甲并用'},
                '申': {'主': ['甲'], '辅': ['庚', '丙'], '说明': '甲木引丁，庚金劈甲，丙火助身'},
                '酉': {'主': ['甲'], '辅': ['庚', '丙'], '说明': '同申月'},
                '戌': {'主': ['甲'], '辅': ['庚'], '说明': '火土燥烈，甲木为用'},
                '亥': {'主': ['甲'], '辅': ['庚'], '说明': '水旺火弱，甲木化水生火'},
                '子': {'主': ['甲'], '辅': ['庚'], '说明': '同亥月'},
                '丑': {'主': ['甲'], '辅': ['庚'], '说明': '同亥月'},
            },
            '戊': {
                '寅': {'主': ['丙'], '辅': ['甲', '癸'], '说明': '无丙则寒，无甲则燥，无癸则枯'},
                '卯': {'主': ['丙'], '辅': ['甲', '癸'], '说明': '同寅月'},
                '辰': {'主': ['甲'], '辅': ['丙', '癸'], '说明': '戊土司令，先甲后丙'},
                '巳': {'主': ['甲'], '辅': ['丙', '癸'], '说明': '戊土建禄，先看甲木'},
                '午': {'主': ['壬'], '辅': ['甲', '丙'], '说明': '火旺土燥，先看壬水'},
                '未': {'主': ['癸'], '辅': ['丙', '甲'], '说明': '杂气财官，先看癸水'},
                '申': {'主': ['丙'], '辅': ['癸', '甲'], '说明': '寒气渐升，先用丙火'},
                '酉': {'主': ['丙'], '辅': ['癸'], '说明': '金旺泄土，宜丙火'},
                '戌': {'主': ['甲'], '辅': ['丙', '癸'], '说明': '戊土当权，先用甲木'},
                '亥': {'主': ['甲'], '辅': ['丙'], '说明': '水旺宜甲木，寒宜丙火'},
                '子': {'主': ['丙'], '辅': ['甲'], '说明': '水旺土虚，用丙甲'},
                '丑': {'主': ['丙'], '辅': ['甲'], '说明': '同子月'},
            },
            '己': {
                '寅': {'主': ['丙'], '辅': ['甲'], '说明': '寒土宜丙火'},
                '卯': {'主': ['甲'], '辅': ['癸'], '说明': '木旺土虚，甲木疏土'},
                '辰': {'主': ['丙'], '辅': ['癸'], '说明': '湿土宜丙火'},
                '巳': {'主': ['癸'], '辅': ['丙'], '说明': '火旺土燥，癸水为先'},
                '午': {'主': ['癸'], '辅': ['丙'], '说明': '同巳月'},
                '未': {'主': ['癸'], '辅': ['丙'], '说明': '同巳月'},
                '申': {'主': ['丙'], '辅': ['癸'], '说明': '寒气渐生，丙火为先'},
                '酉': {'主': ['丙'], '辅': ['癸'], '说明': '同申月'},
                '戌': {'主': ['甲'], '辅': ['丙'], '说明': '土旺宜甲木疏之'},
                '亥': {'主': ['丙'], '辅': ['甲'], '说明': '水旺土虚，丙甲并用'},
                '子': {'主': ['丙'], '辅': ['甲'], '说明': '同亥月'},
                '丑': {'主': ['丙'], '辅': ['甲'], '说明': '同亥月'},
            },
            '庚': {
                '寅': {'主': ['丁'], '辅': ['甲'], '说明': '丁火炼金，甲木引丁'},
                '卯': {'主': ['丁'], '辅': ['甲'], '说明': '同寅月'},
                '辰': {'主': ['丁'], '辅': ['甲'], '说明': '土旺埋金，丁甲并用'},
                '巳': {'主': ['壬'], '辅': ['戊'], '说明': '火旺金熔，壬水为先'},
                '午': {'主': ['壬'], '辅': ['己'], '说明': '同巳月'},
                '未': {'主': ['丁'], '辅': ['甲'], '说明': '土旺埋金，丁甲为用'},
                '申': {'主': ['丁'], '辅': ['甲'], '说明': '金旺宜丁火锻炼'},
                '酉': {'主': ['丁'], '辅': ['甲'], '说明': '同申月'},
                '戌': {'主': ['甲'], '辅': ['壬'], '说明': '土旺埋金，甲壬为用'},
                '亥': {'主': ['丙'], '辅': ['丁'], '说明': '水冷金寒，丙火为尊'},
                '子': {'主': ['丙'], '辅': ['丁'], '说明': '同亥月'},
                '丑': {'主': ['丙'], '辅': ['丁'], '说明': '同亥月'},
            },
            '辛': {
                '寅': {'主': ['壬'], '辅': ['甲'], '说明': '壬水洗辛，甲木引壬'},
                '卯': {'主': ['壬'], '辅': ['甲'], '说明': '同寅月'},
                '辰': {'主': ['壬'], '辅': ['甲'], '说明': '土旺埋金，壬水为先'},
                '巳': {'主': ['壬'], '辅': ['癸'], '说明': '火旺金熔，壬癸为用'},
                '午': {'主': ['壬'], '辅': ['癸'], '说明': '同巳月'},
                '未': {'主': ['壬'], '辅': ['甲'], '说明': '土旺埋金，壬甲为用'},
                '申': {'主': ['壬'], '辅': ['甲'], '说明': '金旺宜壬水泄秀'},
                '酉': {'主': ['壬'], '辅': ['甲'], '说明': '同申月'},
                '戌': {'主': ['壬'], '辅': ['甲'], '说明': '土旺埋金，壬甲为用'},
                '亥': {'主': ['丙'], '辅': ['壬'], '说明': '水冷金寒，丙火为尊'},
                '子': {'主': ['丙'], '辅': ['壬'], '说明': '同亥月'},
                '丑': {'主': ['丙'], '辅': ['壬'], '说明': '同亥月'},
            },
            '壬': {
                '寅': {'主': ['庚'], '辅': ['丙'], '说明': '庚金发水源，丙火暖局'},
                '卯': {'主': ['庚'], '辅': ['辛'], '说明': '木旺水缩，庚辛为用'},
                '辰': {'主': ['甲'], '辅': ['庚'], '说明': '土旺水滞，甲木疏土'},
                '巳': {'主': ['壬'], '辅': ['庚'], '说明': '火旺水涸，壬水为用'},
                '午': {'主': ['壬'], '辅': ['庚'], '说明': '同巳月'},
                '未': {'主': ['辛'], '辅': ['甲'], '说明': '土旺水滞，辛甲为用'},
                '申': {'主': ['戊'], '辅': ['丁'], '说明': '金旺水浊，戊土为用'},
                '酉': {'主': ['戊'], '辅': ['丁'], '说明': '同申月'},
                '戌': {'主': ['甲'], '辅': ['庚'], '说明': '土旺水滞，甲庚并用'},
                '亥': {'主': ['戊'], '辅': ['丙'], '说明': '水旺宜戊土堤岸'},
                '子': {'主': ['戊'], '辅': ['丙'], '说明': '同亥月'},
                '丑': {'主': ['丙'], '辅': ['丁'], '说明': '寒水宜丙丁暖局'},
            },
            '癸': {
                '寅': {'主': ['辛'], '辅': ['丙'], '说明': '辛金发水源，丙火暖局'},
                '卯': {'主': ['庚'], '辅': ['辛'], '说明': '木旺水缩，庚辛为用'},
                '辰': {'主': ['丙'], '辅': ['辛'], '说明': '土旺水浊，丙辛并用'},
                '巳': {'主': ['辛'], '辅': ['庚'], '说明': '火旺水涸，辛庚为用'},
                '午': {'主': ['辛'], '辅': ['庚'], '说明': '同巳月'},
                '未': {'主': ['辛'], '辅': ['丙'], '说明': '土旺水浊，辛丙为用'},
                '申': {'主': ['丁'], '辅': ['甲'], '说明': '金旺水浊，丁甲为用'},
                '酉': {'主': ['丁'], '辅': ['甲'], '说明': '同申月'},
                '戌': {'主': ['辛'], '辅': ['甲'], '说明': '土旺水浊，辛甲为用'},
                '亥': {'主': ['庚'], '辅': ['辛'], '说明': '水旺宜庚辛发源'},
                '子': {'主': ['丙'], '辅': ['辛'], '说明': '寒水宜丙火暖局'},
                '丑': {'主': ['丙'], '辅': ['辛'], '说明': '同子月'},
            },
        }
    
    # ════════════════════════════════════════════════════════════════════
    # 三、格局判断与命格等级对照表（基于《子平真诠》《滴天髓》）
    # ════════════════════════════════════════════════════════════════════
    
    def init_geju_tables(self):
        """初始化格局判断标准"""
        
        # 命格等级划分标准（基于《子平真诠》）
        # 注意：这不是简单的分数，而是格局成败的综合判断
        self.MINGGE_LEVELS = {
            '上上': {
                'score_range': (90, 100),
                'criteria': [
                    '格局真而纯',
                    '财官印食四者均有强根',
                    '格真局清，相喜有力，忌仇有制',
                    '五行一气流通，八字互协有情',
                    '逢伤不能克，逢生不能泄'
                ],
                'description': '命格极贵，富贵双全，功名显达'
            },
            '上': {
                'score_range': (80, 89),
                'criteria': [
                    '格局真',
                    '用神得力且有救应',
                    '大运顺遂',
                    '五行较为流通'
                ],
                'description': '命格清贵，一生顺遂，有名有利'
            },
            '中上': {
                'score_range': (70, 79),
                'criteria': [
                    '格局成',
                    '用神虽不甚有力，但得大运相助',
                    '或为千里侯王'
                ],
                'description': '命格中上，得贵人助，终有所成'
            },
            '中': {
                'score_range': (60, 69),
                'criteria': [
                    '格局成',
                    '用神平常',
                    '或格局虽好但大运不配'
                ],
                'description': '命格中等，平凡之命，需加倍努力'
            },
            '中下': {
                'score_range': (50, 59),
                'criteria': [
                    '格局勉强成立',
                    '用神无力',
                    '大运平平'
                ],
                'description': '命格中下，劳碌之命，多有波折'
            },
            '下': {
                'score_range': (0, 49),
                'criteria': [
                    '格局破败',
                    '用神被制',
                    '大运背逆'
                ],
                'description': '命格贫贱，一生坎坷，诸事不顺'
            }
        }
        
        # 八格定义（基于《渊海子平》）
        # 月令透出的十神决定格局
        self.BA_GE = [
            '正官格', '偏官格（七杀格）',
            '正财格', '偏财格',
            '正印格', '偏印格（枭神格）',
            '食神格', '伤官格'
        ]
        
        # 特殊格局（基于《三命通会》）
        self.TESHU_GEJU = [
            '从财格', '从杀格', '从儿格', '从旺格', '从弱格',
            '化气格', '两神成象格', '建禄格', '月刃格'
        ]
        
        # 格局成败判断要点
        self.GEJU_CHENGBAI = {
            '成格条件': [
                '月令透出天干',
                '格局纯粹不杂',
                '用神得力',
                '有情有力'
            ],
            '败格条件': [
                '格局混杂',
                '用神被制',
                '破损严重',
                '无情无力'
            ]
        }
    
    # ════════════════════════════════════════════════════════════════════
    # 四、财运等级判断标准（基于《三命通会》"财官法"）
    # ════════════════════════════════════════════════════════════════════
    
    def get_caiyun_level(self, bazi_info):
        """
        判断财运等级
        基于《三命通会》的"财官法"理论
        
        财富级别（从低到高）：
        1. 财当财看 - 财富级别小（四柱中有正财、偏财）
        2. 食伤当财看 - 财富级别大（食神、伤官生财）
        3. 禄当财看 - 财富也大（禄神代表俸禄）
        4. 官杀当财看 - 财级最大（官杀为权力，权力生财）
        """
        # 这里只是框架，实际判断需要分析四柱
        return {
            '级别': '',  # 巨富、大富、中富、小富、贫困
            '理论依据': '《三命通会》财官法',
            '说明': ''
        }
    
    # ════════════════════════════════════════════════════════════════════
    # 五、大运吉凶判断标准（基于《三命通会》）
    # ════════════════════════════════════════════════════════════════════
    
    def get_dayun_jixiong(self, dayun_ganzhi, yongshen, jishen):
        """
        判断大运吉凶
        基于《三命通会》理论：大运对命局用神、忌神起损益作用
        
        吉运：帮扶用神或克制忌神的大运
        凶运：克制用神或生扶忌神的大运
        """
        # 这里只是框架
        return {
            '吉凶': '',  # 大吉、小吉、平运、小凶、大凶
            '理论依据': '《三命通会》',
            '说明': ''
        }


# 创建全局实例
classic_tables = ClassicLookupTables()
