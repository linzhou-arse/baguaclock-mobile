# Classic Analyzer - 快速参考指南

## 🚀 快速开始

### 安装
```python
# 项目根目录已有 classic_analyzer 包
# 直接导入即可（暂不支持pip安装）
```

### 基本使用（开发中）
```python
from classic_analyzer.core import ClassicMingliAnalyzer

# 创建分析器
analyzer = ClassicMingliAnalyzer()

# 四柱信息
pillars = {
    'year': ('己', '巳'),
    'month': ('丙', '子'),
    'day': ('丙', '寅'),
    'hour': ('甲', '午')
}

# 完整分析
report = analyzer.analyze_bazi(pillars, gender='男', birth_info={'year': 1990})
print(report)
```

---

## 📚 各模块速查表

### 1️⃣ 财运分析 (caiyun.py)

**4种财运来源：**
```
财当财看  → 级别：小（正财偏财）
食伤当财看 → 级别：大（食神伤官）
禄当财看  → 级别：大（禄神俸禄）
官杀当财看 → 级别：极大（权力生财）
```

**5个财运等级：**
| 等级 | 分数 | 特征 |
|------|------|------|
| 巨富 | 90-100 | 官杀生财、禄权俸禄 |
| 大富 | 75-89 | 财官相生、食伤有力 |
| 中等 | 50-74 | 财官平常、需努力 |
| 小富 | 30-49 | 财星弱有、难大富 |
| 贫困 | 0-29 | 无财源、劳碌终身 |

**经典原文：**
> 《三命通会》财官篇："财有四种看法：财当财看级别小，食伤当财看级别大，禄当财看级别大，官杀当财看级别最大"

---

### 2️⃣ 大运分析 (dayun.py)

**顺逆规则：**
```
男性：阳年顺行 → 阴年逆行
女性：阳年逆行 → 阴年顺行
```

**5个大运等级：**
| 等级 | 分数 | 特征 |
|------|------|------|
| 大吉 | 85-100 | 帮扶用神、十年顺遂 |
| 小吉 | 65-84 | 部分帮扶、基本顺利 |
| 平运 | 40-64 | 不相生不相克 |
| 小凶 | 20-39 | 轻微克制、有坎坷 |
| 大凶 | 0-19 | 克制用神、灾厄重 |

**吉凶判断：**
```
大运与用神相生相合 → 吉
大运与忌神相克相冲 → 吉
大运与用神相克相冲 → 凶
大运与忌神相生相合 → 凶
```

---

### 3️⃣ 综合评分 (mingge_score.py)

**权重分配：**
```
格局三关(30%) + 调候用神(25%) + 财运等级(20%) + 
大运吉凶(15%) + 神煞影响(10%) = 综合评分
```

**6个命格等级：**
| 等级 | 分数 | 描述 |
|------|------|------|
| 上上 | 90-100 | 富贵双全、功名显达 |
| 上 | 80-89 | 清贵一生、事业发达 |
| 中上 | 70-79 | 吉利安定、有升迁 |
| 中 | 50-69 | 平凡衣食、需努力 |
| 中下 | 30-49 | 劳碌波折、困难多 |
| 下 | 0-29 | 贫贱终身、一生坎坷 |

---

## 🔧 核心方法速查

### CaiyunAnalyzer
```python
# 财运分析
result = CaiyunAnalyzer.analyze_caiyun(pillars, day_master)
# 返回：{level, score, sources, detail, classic_text, evaluation}
```

### DayunAnalyzer
```python
# 大运分析
result = DayunAnalyzer.analyze_dayun(pillars, birth_info, gender='男')
# 返回：{qiyun_info, dayun_list, current_dayun, jixiong_info}
```

### MinggeScoreAnalyzer
```python
# 综合评分
result = MinggeScoreAnalyzer.analyze_mingge_score(analysis_results)
# 返回：{mingge_level, final_score, weighted_scores, suggestions}
```

---

## 📖 理论依据速查

| 功能 | 典籍 | 篇章 |
|------|------|------|
| 财运分析 | 《三命通会》| 财官篇 |
| 大运排盘 | 《三命通会》| 大运篇 |
| 综合评分 | 《子平真诠》《滴天髓》| 全篇 |
| 格局三关 | 《子平真诠》《滴天髓》| 全篇 |
| 调候用神 | 《穷通宝鉴》| 120种组合 |
| 神煞分析 | 《渊海子平》《三命通会》| 全篇 |

---

## 🎯 开发进度

### ✅ 已完成（架构层面）
- [x] 模块化包结构建立
- [x] core.py 核心框架
- [x] caiyun.py 财运分析框架
- [x] dayun.py 大运分析框架
- [x] mingge_score.py 综合评分框架

### ⏳ 开发中（逻辑补充）
- [ ] 财运分析逻辑补充
- [ ] 大运排盘算法实现
- [ ] 综合评分计算实现
- [ ] 神煞分析实现
- [ ] 格局三关实现
- [ ] 调候用神实现

---

## 📊 文件大小

| 文件 | 大小 | 行数 |
|------|------|------|
| __init__.py | 1.0KB | 20 |
| core.py | 8.3KB | 190 |
| caiyun.py | 9.8KB | 228 |
| dayun.py | 10.3KB | 268 |
| mingge_score.py | - | 350+ |
| 模块化架构说明.md | 10.9KB | 363 |

---

## 💡 常见问题

### Q: 为什么采用模块化架构？
A: 
- 易于维护（单个模块<350行）
- 便于并行开发
- 便于测试验证
- 便于扩展升级

### Q: 为什么每个模块都这么完整？
A: 
- 用户明确要求"不能简化"
- 完整的判断标准是准确性的保证
- 基于经典著作的完整标准
- 便于后续补充逻辑

### Q: 如何使用当前版本？
A:
- 目前可以参考架构和标准
- 框架完整但逻辑待补充
- 推荐用作参考和学习资料

### Q: 下一步怎么推进？
A:
- 逐个补充各模块的分析逻辑
- 每轮补充一个模块（2-3轮完成一个）
- 定期测试验证

---

## 📞 相关文档

- `模块化架构说明.md` - 完整的架构文档
- `模块化重构完成报告.md` - 重构总结报告
- `第八轮_模块化架构建立.md` - 本轮工作总结
- `../经典命理分析器重构总结.md` - 前七轮总结

---

## 🎓 学习路径

### 入门
1. 阅读 `模块化架构说明.md`
2. 理解各模块的核心概念
3. 查看代码框架结构

### 深入
1. 学习各典籍的相关篇章
2. 理解为什么这样分级
3. 参考经典原文

### 开发
1. 补充单个模块的逻辑
2. 编写对应的测试代码
3. 验证输出结果

---

**最后更新：** 2025-10-27  
**项目状态：** 架构完成（40%完成度）  
**推荐用途：** 参考学习、功能完善、长期维护
